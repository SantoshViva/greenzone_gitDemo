#Default operator Id
QUERY_INBOX_USER_ID=select * from (select * from tb_chat_messages where friendMsisdn='{msisdn}' order by id desc) as t group by msisdn order by id desc
SQL2_MYCHAT_MESSAGE_DETAILS=select * from tb_chat_messages_history_{table_index}  where msisdn ='{msisdn}' and  friendMsisdn='{friendMsisdn}' order by chat_read_date  desc limit 0,8
SQL3_MYFRIENDCHAT_MESSAGE_DETAILS=select * from tb_chat_messages_history_{table_index}  where msisdn ='{friendMsisdn}' and  friendMsisdn='{msisdn}' order by chat_read_date  desc limit 0,8
SQL4_TODAY_USER_ID= select ano.todayUserId, ano.todayMsisdn from tb_chat_today_special_userId_{table_index} ano, tb_subscriptions_{table_index} sub where ano.msisdn = '{msisdn}' and ano.msisdn not in (select friend_msisdn from tb_chat_friend_user_details_{table_index} where msisdn ='{msisdn}') and ano.msisdn not in (select blocked_msisdn from tb_anonymous_chat_block_user_details_{table_index} where msisdn='{msisdn}') and ano.msisdn not in (select friendMsisdn from tb_chat_messages where msisdn='{msisdn}') and ano.msisdn not in (select friendMsisdn from tb_chat_messages_history_{table_index} where msisdn='{msisdn}') and ano.msisdn = sub.msisdn and sub.service ='FB' and ano.operator_id='AIRTEL' and sub.status in ('SUBSCRIBED','GRACE','PENDING') order by ano.id  limit 0 , 4
SQL5_INBOX_MESSAGE_DETAILS =  select *from tb_chat_messages where msisdn='{msisdn}'  and friendMsisdn='{friendMsisdn}'order by chat_date
SQL6_SELECT_GENDER = select gender from tb_anonymous_chat_acc_details_{table_index} where  msisdn='{msisdn}'
SQL7_MYCHAT_USER_ID_INBOX=   select fMsisdn, userId as fUserId, chat_date,DATE_FORMAT(chat_date, "%H:%i")as chatTime, substring(message,1,15) as message from ((select friendUserId as userId,friendMsisdn as fMsisdn,message,chat_date ,id from (select * from tb_chat_messages where msisdn='{msisdn}' order by id desc) as t group by friendMsisdn order by id desc ) UNION (select UserId as userId,msisdn as fMsisdn,message,chat_date,id  from (select * from tb_chat_messages where friendMsisdn='{msisdn}' order by id desc) as t group by msisdn order by id desc)) as p  order by userId,id desc
SQL8_MYCHAT_USER_ID_FROM_HISTORY_TO_OTHERS=select friendMsisdn,friendUserId,substring(message,1,15) as message,chat_read_date,DATE_FORMAT(chat_read_date, "%H:%i") as chatTime from (select *from  tb_chat_messages_history_{table_index} where msisdn='{msisdn}' order by id desc) as t group by friendMsisdn order by id desc
SQL9_MYCHAT_USER_ID_FROM_HISTORY_TO_SELF=select msisdn as fMsisdn,UserId as fUserId,chat_read_date,DATE_FORMAT(chat_read_date, "%H:%i") as chatTime,substring(message,1,15) as message from (select *from  tb_chat_messages_history_{all_table_index} where friendMsisdn='{msisdn}' order by id desc) as t group by msisdn order by id desc
SQL10_CONTACTS_DETAILS =select friend_msisdn as friendMsisdn, friend_userId as friendUserId, Add_friend_date as AddFriendDate,DATE_FORMAT(Add_friend_date, "%H:%i") as AddFriendTime from tb_chat_friend_user_details_{table_index} where msisdn='{msisdn}'
SQL11_GET_USER_ID = select  msisdn as friendMsisdn, userId as friendUserId, gender from tb_anonymous_chat_acc_details_{table_index} where msisdn='{msisdn}'
SQL12_GET_TABLE_INDEX = select table_index from tb_anonymous_chat_username_table_index_mapping where user_id='{userId}'
#SQL13_SEARCH_USER_ID = select ano.msisdn as friendMsidn, ano.userId as friendUserId,ano.gender as gender from tb_anonymous_chat_acc_details_{get_table_index} ano, tb_subscriptions_{get_table_index} sub where ano.msisdn != '{msisdn}'  and ano.msisdn not in (select friend_msisdn from tb_chat_friend_user_details_{get_table_index} where msisdn ='{msisdn}') and ano.msisdn not in (select blocked_msisdn from tb_anonymous_chat_block_user_details_{get_table_index} where msisdn='{msisdn}') and ano.msisdn not in (select friendMsisdn from tb_chat_messages where msisdn='{msisdn}') and ano.msisdn not in (select friendMsisdn from tb_chat_messages_history_{get_table_index} where msisdn='{msisdn}') and ano.msisdn = sub.msisdn and userId like '{searchText}%' and sub.service ='FB' and ano.status='Y' and sub.status in ('SUBSCRIBED','GRACE','PENDING') order by ano.id limit 0, 8
SQL13_SEARCH_USER_ID =  select ano.msisdn as friendMsisdn, ano.userId as friendUserId,ano.gender as gender from tb_anonymous_chat_acc_details_{get_table_index} ano  where ano.msisdn != '{msisdn}'  and userId like '{searchText}%' and ano.status='Y' order by ano.id limit 0, 8;
SQL14_USER_PROFILE_INFO= select status,userId,gender from tb_anonymous_chat_acc_details_{table_index} where msisdn='{msisdn}'
SQL15_USER_ACCOUNT_INFO= select operator_id,Status,renewal_ts from tb_subscriptions_{table_index} where msisdn='{msisdn}' and service='FB' limit 1
SQL16_USER_ACCOUNT_CREATE = insert into tb_anonymous_chat_acc_details_{table_index} (msisdn, userId,gender, ageGroup, location, interests, status,operator_id,notification_opt,notification_date,notification_count,activation_date) values ('{msisdn}','{userId}','{gender}','{ageGroup}','','','Y','{operator}','{defaultNotificationOpt}', now(), 0, now());
SQL17_CHECK_MAX_USER_ID = select prefix_name,max_id+1 as maxId from tb_anonymous_chat_user_info where gender ='{gender}' and  operator_id='{operator}' order by max_id limit 1
SQL18_USER_ID_MAPPING = insert into tb_anonymous_chat_username_table_index_mapping (user_id,table_index,operator_id) values('{userId}', '{table_index}','{operator}')
SQL19_UPDATE_MAX_USER_ID = update tb_anonymous_chat_user_info set max_id=max_id+1 where prefix_name='{prefixName}' and operator_id='{operator}'
SQL20_DEFAULT_TODAY_USERID = select ano.userId as todayUserId, ano.msisdn as todayMsisdn from tb_anonymous_chat_acc_details_{table_index} ano, tb_subscriptions_{table_index} sub where ano.msisdn != '{msisdn}' and ano.status='Y' and ano.gender != '{gender}' and  ano.msisdn not in (select friend_msisdn from tb_chat_friend_user_details_{table_index} where msisdn ='{msisdn}') and ano.msisdn not in (select blocked_msisdn from tb_anonymous_chat_block_user_details_{table_index} where msisdn='{msisdn}') and ano.msisdn not in (select friendMsisdn from tb_chat_messages where msisdn='{msisdn}') and ano.msisdn not in (select friendMsisdn from tb_chat_messages_history_{table_index} where msisdn='{msisdn}') and ano.msisdn = sub.msisdn and sub.service ='FB' and ano.operator_id='AIRTEL' and sub.status in ('SUBSCRIBED','GRACE','PENDING') limit 0 , 4
SQL21_INSERT_CHAT_MESSAGE_INBOX= insert into tb_chat_messages (msisdn,UserId, friendMsisdn,friendUserId,message,operator_id)values('{msisdn}','{userId}','{friendMsisdn}','{friendUserId}','{chatMessage}','{operator}');
SQL22_INSERT_CHAT_MESSAGE_HISTORY= insert into tb_chat_messages_history_{table_index} (msisdn, userId, friendMsisdn,friendUserId, message, chat_read_date,operator_id) values('{msisdn}','{userId}','{friendMsisdn}','{friendUserId}','{chatMessage}',now(),'{operator}');